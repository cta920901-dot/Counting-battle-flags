<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>æ•¸æˆ°æ£‹ï¼šè²“å’ªå¤§æˆ°çˆ­ | Math Cat Battle</title>
    
    <!-- React & ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+TC:wght@700;900&family=Zen+Maru+Gothic:wght@500;700;900&family=Chakra+Petch:wght@600;700&display=swap" rel="stylesheet">

    <!-- Confetti -->
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

    <style>
        body {
            font-family: 'Zen Maru Gothic', 'Noto Serif TC', serif;
            background-color: #e6f2ff; 
            color: #2d3748;
            overflow: hidden; /* Prevent scrolling */
            touch-action: none;
        }

        .bg-japanese-pattern {
            position: fixed;
            top: 0; left: 0; right: 0; bottom: 0;
            z-index: -2;
            background-image: url("data:image/svg+xml,%3Csvg width='100' height='20' viewBox='0 0 100 20' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M21.184 20c.357-.13.72-.264 1.088-.402l1.768-.661C33.64 15.347 39.647 14 50 14c10.271 0 15.362 1.222 24.629 4.928.955.383 1.869.74 2.75 1.072h6.225c-2.51-.735-5.197-1.52-8.144-2.52-3.262-1.107-6.256-2.172-9.65-3.342-8.14-2.816-15.36-5.316-26.16-5.316-11.057 0-17.222 2.566-24.623 5.138-3.556 1.235-6.95 2.378-10.48 3.578l-1.557.53c-3.022 1.026-5.91 1.987-8.795 2.932h7.803zm-6.132-5.786c-3.656-1.307-7.208-2.548-11.023-3.85-7.186-2.448-12.99-4.437-20.409-4.437-7.204 0-13.337 2.155-20.96 4.935-3.586 1.309-7.22 2.618-10.725 3.89V8.507c4.468-1.75 9.223-3.507 14.443-5.25C12.774 1.004 21.022 0 29.629 0c8.685 0 16.187.986 22.673 3.158 4.297 1.438 8.39 2.92 12.28 4.39L67.47 8.63c-4.046-1.625-8.607-3.28-13.75-4.872C47.14 1.495 39.423 0 30.943 0c-8.625 0-15.562 1.35-21.532 3.57C4.698 5.325 0 6.814 0 6.814v4.39c2.21-1.04 4.517-1.996 7.143-2.96 6.748-2.485 13.73-4.948 23.704-4.948 9.73 0 15.995 2.42 23.54 5.132 3.37 1.212 6.706 2.406 9.793 3.57h-8.892c-2.165-.763-4.262-1.5-6.57-2.296-7.593-2.617-13.86-4.778-23.358-4.778-9.317 0-15.316 2.14-22.72 4.704-3.84 1.332-7.672 2.672-11.378 3.975.508.176 1.016.35 1.522.523 1.126.387 2.256.773 3.39 1.157l.193.065zm15.307-1.97c6.533-2.178 12.01-3.73 18.16-3.73 6.62 0 11.953 1.95 18.117 4.333l.002.002c2.425.938 4.867 1.886 7.524 2.856h-8.476c-2.07-.745-4.066-1.474-6.27-2.244-7.106-2.488-12.976-4.545-21.862-4.545-9.113 0-15.14 2.105-22.517 4.613-3.964 1.35-7.93 2.702-11.756 4.01L15.242 20h7.902c.32-.116.643-.233.97-.35l.052-.017c.69-.25 1.38-.5 2.08-.75.537-.192 1.075-.384 1.616-.576l.052-.018c3.305-1.177 6.714-2.383 10.48-3.69 7.4-2.572 13.564-5.138 24.622-5.138 10.802 0 18.02 2.5 26.16 5.316 3.393 1.17 6.387 2.235 9.65 3.342l.564.19v-4.102l-1.37-.5c-3.41-1.247-6.758-2.492-9.916-3.71C61.924 7.81 55.932 6.57 46.947 6.57c-9.154 0-15.164 1.183-22.263 3.52l-.002.002c-2.282.75-4.455 1.452-6.798 2.25-7.06 2.403-12.726 4.23-20.337 4.23-7.445 0-12.816-1.648-19.163-3.692C4.816 12.068 0 11.12 0 11.12v3.65c1.568.528 3.542 1.14 5.798 1.816 7.276 2.185 13.103 3.935 20.57 3.935 8.227 0 15.14-2.284 22.518-4.85l.055-.02c.535-.185 1.07-.37 1.61-.555l.056-.02c.686-.236 1.37-.47 2.06-.708l.053-.018c3.835-1.31 7.792-2.65 11.85-3.97 7.228-2.345 13.106-4.372 21.144-4.372 8.226 0 15.138 2.284 22.516 4.848 3.97 1.346 7.89 2.692 11.706 4.014v-3.942l-1.734-.604c-3.615-1.25-7.13-2.455-10.668-3.653-7.527-2.54-13.563-4.575-21.822-4.575-8.02 0-13.385 1.647-19.633 3.627-4.175 1.32-8.85 2.744-14.038 4.422C23.267 15.603 14.98 16.5 6.71 16.5c-5.813 0-10.63-.434-14.66-1.295l.006 4.05c4.32.82 9.687 1.222 15.83 1.222 8.016 0 15.922-.87 23.63-3.364 4.838-1.562 9.162-2.872 13.767-4.158l.256-.072.006-.002c7.858-2.183 14.163-3.844 21.202-3.844 7.856 0 14.16 1.662 22.018 3.844 2.185.605 4.492 1.236 6.86 1.934v-3.78c-3.056-1.02-6.256-2.09-9.67-3.223C78.626 5.828 71.85 3.87 63.83 3.87c-7.88 0-13.942 1.87-21.097 4.142-2.295.728-4.627 1.46-7.046 2.228l-.212.065c-8.505 2.666-15.196 4.695-23.756 4.695-7.857 0-14.162-1.662-22.02-3.844l-.5-.14v3.795c3.612 1.245 7.127 2.45 10.666 3.648C17.405 21 23.443 23.036 31.703 23.036c7.877 0 13.938-1.87 21.092-4.14 2.294-.728 4.626-1.46 7.045-2.226l.213-.067c8.506-2.665 15.197-4.695 23.756-4.695 7.86 0 14.163 1.662 22.02 3.844 4.455 1.236 8.848 2.51 13.175 3.845v-3.625c-5.19-1.554-10.475-3.07-15.92-4.83-7.704-2.49-13.99-4.473-22.018-4.473-8.03 0-14.317 1.983-22.02 4.475-4.366 1.41-8.618 2.652-12.84 3.862V20z' fill='%23c4e0f5' fill-opacity='0.4' fill-rule='evenodd'/%3E%3C/svg%3E");
            background-size: 100px 20px;
            opacity: 0.6;
        }

        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #f1f1f1;
        }
        ::-webkit-scrollbar-thumb {
            background: #9ca3af;
            border-radius: 4px;
        }

        .wood-texture {
            background: #e6c698;
            position: relative;
            box-shadow: 0 15px 35px rgba(0,0,0,0.3);
        }
        .wood-texture::before {
            content: "";
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            background: repeating-linear-gradient(45deg, rgba(255,255,255,0.1) 0px, rgba(0,0,0,0.05) 2px, rgba(255,255,255,0.1) 4px);
            pointer-events: none;
            border-radius: 0.75rem;
        }
        
        .modal-backdrop {
            backdrop-filter: blur(8px);
        }

        .digital-font {
            font-family: 'Chakra Petch', monospace;
        }

        /* Number text shadow for better visibility */
        .text-shadow-white {
            text-shadow: 2px 2px 0px rgba(255, 255, 255, 0.8), -1px -1px 0 rgba(255,255,255,0.8);
        }

        /* Animations */
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            10%, 30%, 50%, 70%, 90% { transform: translateX(-5px); }
            20%, 40%, 60%, 80% { transform: translateX(5px); }
        }
        .animate-shake {
            animation: shake 0.5s cubic-bezier(.36,.07,.19,.97) both;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: scale(0.95); }
            to { opacity: 1; transform: scale(1); }
        }
        .animate-fade-in-pop {
            animation: fadeIn 0.3s ease-out forwards;
        }
    </style>
</head>
<body class="h-screen w-screen flex flex-col overflow-hidden">
    <div class="bg-japanese-pattern w-full h-full absolute inset-0"></div>
    <div id="root" class="w-full h-full flex flex-col"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        // Constants
        const COLS = 10;
        const ROWS = 10;
        const TOTAL_GAME_TIME = 600; 
        const TURN_TIME_LIMIT = 10; 
        const MAX_FOULS = 5;
        const PIECE_VALUES = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10];

        // --- Audio Context ---
        const audioCtx = new (window.AudioContext || window.webkitAudioContext)();
        const playSound = (type) => {
            if (audioCtx.state === 'suspended') audioCtx.resume();
            const osc = audioCtx.createOscillator();
            const gainNode = audioCtx.createGain();
            osc.connect(gainNode);
            gainNode.connect(audioCtx.destination);
            const now = audioCtx.currentTime;

            if (type === 'move') {
                osc.type = 'sine';
                osc.frequency.setValueAtTime(600, now);
                osc.frequency.exponentialRampToValueAtTime(1200, now + 0.1);
                gainNode.gain.setValueAtTime(0.3, now);
                gainNode.gain.exponentialRampToValueAtTime(0.01, now + 0.1);
                osc.start(now);
                osc.stop(now + 0.1);
            } else if (type === 'capture') {
                osc.type = 'sawtooth';
                osc.frequency.setValueAtTime(200, now);
                osc.frequency.exponentialRampToValueAtTime(50, now + 0.15);
                gainNode.gain.setValueAtTime(0.3, now);
                gainNode.gain.exponentialRampToValueAtTime(0.01, now + 0.15);
                osc.start(now);
                osc.stop(now + 0.15);
            } else if (type === 'error') {
                osc.type = 'square';
                osc.frequency.setValueAtTime(100, now);
                osc.frequency.linearRampToValueAtTime(80, now + 0.3);
                gainNode.gain.setValueAtTime(0.3, now);
                gainNode.gain.linearRampToValueAtTime(0.01, now + 0.3);
                osc.start(now);
                osc.stop(now + 0.3);
            }
        };

        // --- Icons ---
        const PawIcon = ({ className }) => (<svg viewBox="0 0 24 24" fill="currentColor" className={className}><path d="M12 2a3 3 0 0 1 3 3 3 3 0 0 1-3 3 3 3 0 0 1-3-3 3 3 0 0 1 3-3m5 4.5a2.5 2.5 0 0 1 2.5 2.5 2.5 2.5 0 0 1-2.5 2.5 2.5 2.5 0 0 1-2.5-2.5M7 6.5a2.5 2.5 0 0 1 2.5 2.5 2.5 2.5 0 0 1-2.5 2.5 2.5 2.5 0 0 1-2.5-2.5A2.5 2.5 0 0 1 7 6.5M12 10a5 5 0 0 1 5 5v2a3 3 0 0 1-3 3H10a3 3 0 0 1-3-3v-2a5 5 0 0 1 5-5z"/></svg>);
        const BookIcon = ({ className }) => (<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"/><path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"/></svg>);
        const TrophyIcon = ({ className }) => (<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" className={className}><path fillRule="evenodd" d="M5.166 2.621v.858c-1.035.148-2.059.33-3.071.543a.75.75 0 00-.584.859 6.753 6.753 0 006.138 5.6 6.73 6.73 0 002.743 1.346A6.707 6.707 0 019.279 15H8.54c-1.036 0-1.875.84-1.875 1.875V19.5h-.75a2.25 2.25 0 00-2.25 2.25c0 .414.336.75.75.75h15a.75.75 0 00.75-.75 2.25 2.25 0 00-2.25-2.25h-.75v-2.625c0-1.036-.84-1.875-1.875-1.875h-.739a6.706 6.706 0 01-1.112-3.173 6.73 6.73 0 002.743-1.347 6.753 6.753 0 006.139-5.6.75.75 0 00-.585-.858 47.76 47.76 0 00-3.07-.543V2.62a.75.75 0 00-.658-.744 49.22 49.22 0 00-6.093-.377c-2.063 0-4.096.128-6.093.377a.75.75 0 00-.657.744zm0 2.329a5.231 5.231 0 011.042.64 6.739 6.739 0 00-.691.512c-.375.309-.714.653-1.013 1.026a5.254 5.254 0 01.662-2.178zm10.892.64a5.23 5.23 0 011.042-.64 5.254 5.254 0 01.662 2.178c-.299-.373-.638-.717-1.013-1.026a6.739 6.739 0 00-.691-.512z" clipRule="evenodd" /></svg>);
        const ClockIcon = ({ className }) => (<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><circle cx="12" cy="12" r="10" /><polyline points="12 6 12 12 16 14" /></svg>);
        const AlertIcon = ({ className }) => (<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><circle cx="12" cy="12" r="10"></circle><line x1="15" y1="9" x2="9" y2="15"></line><line x1="9" y1="9" x2="15" y2="15"></line></svg>);
        const SwapIcon = ({ className }) => (<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M16 3h5v5M4 20L21 3M21 16v5h-5M15 15l5 5M4 4l5 5"/></svg>);
        const PauseIcon = ({ className }) => (<svg viewBox="0 0 24 24" fill="currentColor" className={className}><rect x="6" y="4" width="4" height="16"></rect><rect x="14" y="4" width="4" height="16"></rect></svg>);
        const PlayIcon = ({ className }) => (<svg viewBox="0 0 24 24" fill="currentColor" className={className}><polygon points="5 3 19 12 5 21 5 3"></polygon></svg>);

        const CatPieceSVG = ({ colorClass, strokeClass }) => (
            <svg viewBox="0 0 100 100" className="w-full h-full drop-shadow-md">
                <path d="M 20 35 Q 15 5 40 20 Q 50 15 60 20 Q 85 5 80 35 A 45 42 0 1 1 20 35 Z" className={colorClass} stroke={strokeClass ? "currentColor" : "none"} strokeWidth="3" />
            </svg>
        );

        // --- Rules Modal ---
        const RulesModal = ({ onClose, isInitial }) => (
            <div className="fixed inset-0 z-[9999] flex items-center justify-center bg-black/80 modal-backdrop p-4" onClick={isInitial ? undefined : onClose}>
                <div className="bg-white rounded-3xl w-full max-w-4xl h-[90vh] flex flex-col shadow-2xl overflow-hidden relative" onClick={e => e.stopPropagation()}>
                    <div className="bg-gradient-to-r from-[#708899] to-[#5a6e7d] p-6 flex items-center justify-between text-white shrink-0">
                        <h2 className="text-3xl font-black flex items-center gap-3 tracking-widest">
                            <BookIcon className="w-9 h-9"/> 
                            <span className="drop-shadow-md">æ•¸æˆ°æ£‹ï¼šæˆ°ç•¥æŒ‡å—</span>
                        </h2>
                        {!isInitial && <button onClick={onClose} className="hover:bg-white/20 p-2 rounded-full text-2xl leading-none transition-colors">&times;</button>}
                    </div>
                    
                    <div className="p-8 overflow-y-auto space-y-8 bg-[#eef2f5] text-[#4a5d6b] text-lg leading-relaxed flex-1">
                        {/* Goal Section */}
                        <section className="bg-white p-6 rounded-2xl shadow-sm border-l-8 border-[#708899] hover:shadow-md transition-shadow">
                            <h3 className="text-2xl font-bold text-[#5f7d95] mb-4 flex items-center gap-3">
                                <span className="bg-[#dae3ea] text-[#5f7d95] w-10 h-10 flex items-center justify-center rounded-full text-xl shadow-inner font-black">1</span> 
                                å‹åˆ©æ¢ä»¶
                            </h3>
                            <div className="pl-4 ml-2">
                                <p className="font-medium text-xl text-stone-700">
                                    é€²è¡Œ<span className="text-[#5f7d95] font-bold mx-1">å…©å›åˆ</span>æ”»å®ˆäº¤æ›è³½ã€‚
                                    <br/>åƒæ‰å°æ‰‹æ£‹å­ã€æˆ–è¿«ä½¿å°æ‰‹çŠ¯è¦å‡ºå±€ï¼Œå³ç²å¾—è©²å›åˆå‹åˆ©ï¼
                                </p>
                            </div>
                        </section>

                        {/* Rules Grid */}
                        <div className="grid md:grid-cols-2 gap-6">
                            {/* Time Rules */}
                            <section className="bg-white p-6 rounded-2xl shadow-sm border-l-8 border-[#8da399] hover:shadow-md transition-shadow flex flex-col h-full">
                                <h3 className="text-2xl font-bold text-[#6b827d] mb-4 flex items-center gap-3">
                                    <span className="bg-[#e0e8e5] text-[#6b827d] w-10 h-10 flex items-center justify-center rounded-full text-xl shadow-inner font-black">2</span> 
                                    æ™‚é–“é™åˆ¶
                                </h3>
                                <div className="space-y-4 flex-1">
                                    <div className="flex items-start gap-3 bg-[#f0f4f2] p-3 rounded-lg border border-[#8da399]/30">
                                        <div className="text-3xl">â°</div>
                                        <div>
                                            <b className="text-[#556b66] block text-lg">æ•´å ´æ¯”è³½ 10 åˆ†é˜</b>
                                            <span className="text-stone-600 text-base">æ™‚é–“åˆ°æ™‚ç«‹å³çµç®—ï¼Œåƒå­å¤šè€…ç²å‹ã€‚</span>
                                        </div>
                                    </div>
                                    <div className="flex items-start gap-3 bg-red-50/50 p-3 rounded-lg border border-red-100">
                                        <div className="text-3xl">âš¡</div>
                                        <div>
                                            <b className="text-red-800 block text-lg">é€²æ”»é™æ™‚ 10 ç§’</b>
                                            <span className="text-stone-600 text-base">æ€è€ƒå¤ªä¹…æœƒè¢«è¨˜ä¸€æ¬¡çŠ¯è¦ä¸¦å¼·åˆ¶æ›æ‰‹ï¼</span>
                                        </div>
                                    </div>
                                </div>
                            </section>

                            {/* Foul Rules */}
                            <section className="bg-white p-6 rounded-2xl shadow-sm border-l-8 border-[#d48888] hover:shadow-md transition-shadow flex flex-col h-full">
                                <h3 className="text-2xl font-bold text-[#b56565] mb-4 flex items-center gap-3">
                                    <span className="bg-[#fcebeb] text-[#b56565] w-10 h-10 flex items-center justify-center rounded-full text-xl shadow-inner font-black">3</span> 
                                    çŠ¯è¦è¦å‰‡
                                </h3>
                                <ul className="space-y-4 pl-2 flex-1">
                                    <li className="flex items-center gap-3">
                                        <span className="text-2xl">ğŸš«</span>
                                        <span><b>è¨ˆç®—éŒ¯èª¤ï¼š</b>é»æ“Šä¸èƒ½æ•´é™¤çš„æ ¼å­ã€‚</span>
                                    </li>
                                    <li className="flex items-center gap-3">
                                        <span className="text-2xl">ğŸŒ</span>
                                        <span><b>æ€è€ƒè¶…æ™‚ï¼š</b>è¶…é 10 ç§’æœªè¡Œå‹•ã€‚</span>
                                    </li>
                                    <li className="flex items-center gap-3 bg-red-100 p-2 rounded-lg border border-red-200">
                                        <span className="text-2xl">ğŸ’€</span>
                                        <span className="font-bold text-red-900">å–®å±€æ»¿ 5 æ¬¡çŠ¯è¦ç›´æ¥åˆ¤è¼¸ï¼</span>
                                    </li>
                                </ul>
                            </section>
                        </div>

                        {/* Movement */}
                        <section className="bg-[#dae3ea] p-6 rounded-2xl border-2 border-[#cfd8dc] shadow-sm">
                            <h3 className="text-xl font-bold text-[#5f7d95] mb-4 flex items-center gap-2">
                                <PawIcon className="w-7 h-7"/> ç§»å‹•èˆ‡æˆ°é¬¥
                            </h3>
                            <div className="grid grid-cols-1 md:grid-cols-3 gap-4 text-center text-base font-bold text-[#4a5d6b]">
                                <div className="bg-white p-4 rounded-xl shadow-sm flex flex-col items-center gap-1">
                                    <span className="text-[#9caebf] text-xs uppercase tracking-widest">æ–¹å‘</span>
                                    <span>åªèƒ½ç›´èµ° (ä¸å¯æ©«ç§»)</span>
                                </div>
                                <div className="bg-white p-4 rounded-xl shadow-sm flex flex-col items-center gap-1">
                                    <span className="text-[#9caebf] text-xs uppercase tracking-widest">æ¢ä»¶</span>
                                    <span>ç›®æ¨™å¿…é ˆèƒ½æ•´é™¤</span>
                                </div>
                                <div className="bg-white p-4 rounded-xl shadow-sm flex flex-col items-center gap-1">
                                    <span className="text-[#9caebf] text-xs uppercase tracking-widest">å‡ç´š</span>
                                    <span>æŠµé”åº•ç·šè®Šèº«ç„¡æ•µ</span>
                                </div>
                            </div>
                        </section>
                    </div>
                    
                    <div className="bg-white p-6 border-t border-stone-200 flex justify-end shrink-0 shadow-[0_-4px_6px_-1px_rgba(0,0,0,0.1)]">
                        <button onClick={onClose} className="bg-gradient-to-r from-[#708899] to-[#5f7d95] hover:from-[#5f7d95] hover:to-[#4a5d6b] text-white px-12 py-4 rounded-2xl font-black text-2xl shadow-xl hover:shadow-2xl transform transition-all hover:-translate-y-1 active:scale-95 w-full md:w-auto tracking-widest flex items-center justify-center gap-3">
                            <span>{isInitial ? "æˆ‘æº–å‚™å¥½äº†ï¼" : "å›åˆ°æˆ°å ´"}</span> ğŸš€
                        </button>
                    </div>
                </div>
            </div>
        );

        // --- Name Input Modal ---
        const NameInputModal = ({ whiteName, setWhiteName, blackName, setBlackName, onConfirm }) => (
            <div className="fixed inset-0 z-[100] flex items-center justify-center bg-[#708899]/80 backdrop-blur-sm p-4 animate-fade-in-pop">
                <div className="bg-white rounded-3xl p-8 max-w-md w-full shadow-2xl border-4 border-[#708899] relative overflow-hidden">
                    <div className="absolute -top-10 -right-10 w-32 h-32 bg-[#e6f2ff] rounded-full"></div>
                    <div className="absolute -bottom-10 -left-10 w-24 h-24 bg-[#dae3ea] rounded-full"></div>
                    
                    <div className="relative z-10 text-center">
                        <div className="text-6xl mb-4">ğŸ± VS ğŸ˜¼</div>
                        <h2 className="text-3xl font-bold text-[#5a6e7d] mb-2 font-serif">é¸æ‰‹ç™»éŒ„</h2>
                        <p className="text-stone-500 mb-8 font-bold">æº–å‚™å¥½æ¥å—æ•¸å­¸æŒ‘æˆ°äº†å—ï¼Ÿ</p>
                        
                        <div className="space-y-6">
                            <div className="text-left">
                                <label className="block text-sm font-bold text-[#5a6e7d] mb-2 ml-1">âšª ç™½è²“é¸æ‰‹ (å…ˆæ‰‹)</label>
                                <input 
                                    type="text" 
                                    value={whiteName}
                                    onChange={(e) => setWhiteName(e.target.value)}
                                    className="w-full px-4 py-3 rounded-xl border-2 border-[#cfd8dc] focus:border-[#708899] focus:ring-2 focus:ring-[#708899]/30 outline-none transition-all text-lg font-bold text-stone-700 bg-stone-50"
                                    placeholder="è«‹è¼¸å…¥åå­—..."
                                />
                            </div>
                            
                            <div className="text-left">
                                <label className="block text-sm font-bold text-[#5a6e7d] mb-2 ml-1">âš« é»‘è²“é¸æ‰‹ (å¾Œæ‰‹)</label>
                                <input 
                                    type="text" 
                                    value={blackName}
                                    onChange={(e) => setBlackName(e.target.value)}
                                    className="w-full px-4 py-3 rounded-xl border-2 border-[#cfd8dc] focus:border-[#5a6e7d] focus:ring-2 focus:ring-[#5a6e7d]/30 outline-none transition-all text-lg font-bold text-stone-700 bg-stone-50"
                                    placeholder="è«‹è¼¸å…¥åå­—..."
                                />
                            </div>

                            <button 
                                onClick={() => {
                                    if(whiteName.trim() && blackName.trim()){
                                        onConfirm();
                                    }
                                }}
                                className="w-full py-4 bg-gradient-to-r from-[#708899] to-[#5f7d95] hover:from-[#5f7d95] hover:to-[#4a5d6b] text-white rounded-xl font-bold shadow-lg transform transition-transform active:scale-95 text-xl mt-4"
                            >
                                é–‹å§‹å°æˆ°ï¼ ğŸš€
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        );

        // --- Logic ---
        const generateInitialState = () => {
            const whiteStart = [1,2,3,4,5,6,7,8,9,10].sort(() => Math.random() - 0.5);
            const blackStart = [1,2,3,4,5,6,7,8,9,10].sort(() => Math.random() - 0.5);
            const pieces = [];
            whiteStart.forEach((val, idx) => { pieces.push({ id: `w-${val}`, player: 'white', value: val, position: idx, isUpgraded: false }); });
            blackStart.forEach((val, idx) => { pieces.push({ id: `b-${val}`, player: 'black', value: val, position: 90 + idx, isUpgraded: false }); });
            return pieces;
        };

        const formatTime = (seconds) => {
            const m = Math.floor(seconds / 60);
            const s = seconds % 60;
            return `${m}:${s < 10 ? '0' : ''}${s}`;
        };

        const App = () => {
            const [showInitialRules, setShowInitialRules] = useState(true);
            const [isNameSet, setIsNameSet] = useState(false);
            const [pieces, setPieces] = useState([]);
            const [turn, setTurn] = useState('white');
            const [selectedPieceId, setSelectedPieceId] = useState(null);
            const [isPaused, setIsPaused] = useState(false);
            const [round, setRound] = useState(1);
            const [roundWinner, setRoundWinner] = useState(null);
            const [matchOver, setMatchOver] = useState(false);
            const [winReason, setWinReason] = useState("");
            const [history, setHistory] = useState([]);
            const [errorMsg, setErrorMsg] = useState(null);
            const [showRules, setShowRules] = useState(false);
            const [p1Name, setP1Name] = useState(""); 
            const [p2Name, setP2Name] = useState("");
            const [playerWins, setPlayerWins] = useState({ p1: 0, p2: 0 });
            const [fouls, setFouls] = useState({ white: 0, black: 0 });
            const [globalTime, setGlobalTime] = useState(TOTAL_GAME_TIME);
            const [turnTime, setTurnTime] = useState(TURN_TIME_LIMIT);

            const errorTimeoutRef = useRef(null);
            const timerRef = useRef(null);
            const turnTimerRef = useRef(null);
            const piecesRef = useRef(pieces);

            useEffect(() => { piecesRef.current = pieces; }, [pieces]);

            useEffect(() => {
                if (isNameSet && !showInitialRules) { startRound(); }
                return () => {
                    if (errorTimeoutRef.current) clearTimeout(errorTimeoutRef.current);
                    if (timerRef.current) clearInterval(timerRef.current);
                    if (turnTimerRef.current) clearInterval(turnTimerRef.current);
                };
            }, [isNameSet, showInitialRules]);

            useEffect(() => {
                if (!isNameSet || showInitialRules || roundWinner || matchOver || errorMsg || showRules || isPaused) {
                    if (timerRef.current) clearInterval(timerRef.current);
                    return;
                }
                timerRef.current = setInterval(() => {
                    setGlobalTime(prev => {
                        if (prev <= 1) { clearInterval(timerRef.current); handleGlobalTimeOut(); return 0; }
                        return prev - 1;
                    });
                }, 1000);
                return () => clearInterval(timerRef.current);
            }, [isNameSet, showInitialRules, roundWinner, matchOver, errorMsg, showRules, isPaused]);

            useEffect(() => {
                if (!isNameSet || showInitialRules || roundWinner || matchOver || errorMsg || showRules || isPaused) {
                    if (turnTimerRef.current) clearInterval(turnTimerRef.current);
                    return;
                }
                turnTimerRef.current = setInterval(() => {
                    setTurnTime(prev => {
                        if (prev <= 1) { clearInterval(turnTimerRef.current); handleTurnTimeout(); return 0; }
                        return prev - 1;
                    });
                }, 1000);
                return () => clearInterval(turnTimerRef.current);
            }, [turn, isNameSet, showInitialRules, roundWinner, matchOver, errorMsg, showRules, isPaused]);

            const startRound = () => {
                setPieces(generateInitialState());
                setTurn('white');
                setSelectedPieceId(null);
                setRoundWinner(null);
                setWinReason("");
                setHistory([]);
                setErrorMsg(null);
                setGlobalTime(TOTAL_GAME_TIME);
                setTurnTime(TURN_TIME_LIMIT);
                setFouls({ white: 0, black: 0 });
                setIsPaused(false);
            };

            const handleNameConfirm = () => { setIsNameSet(true); };
            const togglePause = () => { setIsPaused(!isPaused); };
            const getCurrentWhiteName = () => round === 1 ? p1Name : p2Name;
            const getCurrentBlackName = () => round === 1 ? p2Name : p1Name;

            const handleGlobalTimeOut = () => {
                const currentPieces = piecesRef.current;
                const whitePiecesLeft = currentPieces.filter(p => p.player === 'white');
                const blackPiecesLeft = currentPieces.filter(p => p.player === 'black');
                const whiteScore = 10 - whitePiecesLeft.length; 
                const blackScore = 10 - blackPiecesLeft.length; 

                if (whiteScore > blackScore) triggerWin('white', `â° æ™‚é–“åˆ°ï¼ç™½è²“åƒæ‰ ${whiteScore} å­ï¼Œé»‘è²“åƒæ‰ ${blackScore} å­ã€‚`);
                else if (blackScore > whiteScore) triggerWin('black', `â° æ™‚é–“åˆ°ï¼é»‘è²“åƒæ‰ ${blackScore} å­ï¼Œç™½è²“åƒæ‰ ${whiteScore} å­ã€‚`);
                else triggerWin('draw', "â° æ™‚é–“åˆ°ï¼é›™æ–¹æˆ°ç¸¾å®Œå…¨ç›¸åŒï¼Œå¹³å±€ï¼"); 
            };

            const handleTurnTimeout = () => {
                const currentPlayerName = turn === 'white' ? getCurrentWhiteName() : getCurrentBlackName();
                playSound('error');
                const newFouls = fouls[turn] + 1;
                setFouls(prev => ({ ...prev, [turn]: newFouls }));
                if (newFouls >= MAX_FOULS) { triggerWin(turn === 'white' ? 'black' : 'white', "âŒ å°æ‰‹çŠ¯è¦æ»¿ 5 æ¬¡ï¼"); return; }
                setErrorMsg({ title: "âš¡ æ€è€ƒå¤ªä¹…å•¦ï¼", detail: `${currentPlayerName} è¶…æ™‚æœªè¡Œå‹• (çŠ¯è¦ ${newFouls}/${MAX_FOULS})` });
                if (errorTimeoutRef.current) clearTimeout(errorTimeoutRef.current);
                errorTimeoutRef.current = setTimeout(() => {
                    setErrorMsg(null); setSelectedPieceId(null); setTurn(prev => prev === 'white' ? 'black' : 'white'); setTurnTime(TURN_TIME_LIMIT); 
                }, 2000);
            };

            const getValidMoves = (piece, allPieces) => {
                if (!piece) return [];
                const moves = [];
                const currentPos = piece.position;
                const currentRow = Math.floor(currentPos / 10);
                let targetRow;
                if (!piece.isUpgraded) targetRow = piece.player === 'white' ? currentRow + 1 : currentRow - 1;
                else targetRow = piece.player === 'white' ? currentRow - 1 : currentRow + 1;
                if (targetRow < 0 || targetRow >= ROWS) return [];
                const startIdx = targetRow * 10;
                for (let i = startIdx; i < startIdx + 10; i++) {
                    let isMathValid = piece.isUpgraded ? true : (i + 1) % piece.value === 0;
                    if (isMathValid) {
                        const occupant = allPieces.find(p => p.position === i);
                        if (!occupant) moves.push({ type: 'move', to: i });
                        else if (occupant.player !== piece.player) moves.push({ type: 'capture', to: i, capturedPiece: occupant });
                    }
                }
                return moves;
            };

            const handleSquareClick = (idx) => {
                if (roundWinner || matchOver || errorMsg || showRules || !isNameSet || isPaused || showInitialRules) return; 
                const clickedPiece = pieces.find(p => p.position === idx);
                if (clickedPiece && clickedPiece.player === turn) {
                    setSelectedPieceId(selectedPieceId === clickedPiece.id ? null : clickedPiece.id);
                    playSound('move');
                    return;
                }
                if (selectedPieceId) {
                    const selectedPiece = pieces.find(p => p.id === selectedPieceId);
                    const validMoves = getValidMoves(selectedPiece, pieces);
                    const move = validMoves.find(m => m.to === idx);
                    if (move) executeMove(selectedPiece, move);
                    else handleInvalidMove(selectedPiece, idx);
                }
            };

            const handleInvalidMove = (piece, targetIdx) => {
                playSound('error');
                const newFouls = fouls[turn] + 1;
                setFouls(prev => ({ ...prev, [turn]: newFouls }));
                if (newFouls >= MAX_FOULS) { triggerWin(turn === 'white' ? 'black' : 'white', "âŒ å°æ‰‹çŠ¯è¦æ»¿ 5 æ¬¡ï¼"); return; }
                const currentPlayerName = piece.player === 'white' ? getCurrentWhiteName() : getCurrentBlackName();
                setErrorMsg({ title: "è¸©åˆ°é™·é˜±å•¦ï¼", detail: `ç„¡æ³•ç§»å‹• (çŠ¯è¦ ${newFouls}/${MAX_FOULS})` });
                if (errorTimeoutRef.current) clearTimeout(errorTimeoutRef.current);
                errorTimeoutRef.current = setTimeout(() => {
                    setErrorMsg(null); setSelectedPieceId(null); setTurn(prev => prev === 'white' ? 'black' : 'white'); setTurnTime(TURN_TIME_LIMIT);
                }, 2000);
            };

            const executeMove = (piece, move) => {
                let newPieces = pieces.filter(p => p.id !== piece.id);
                if (move.type === 'capture') { newPieces = newPieces.filter(p => p.id !== move.capturedPiece.id); playSound('capture'); } else { playSound('move'); }
                let isUpgraded = piece.isUpgraded;
                if (!isUpgraded) {
                    const targetRow = Math.floor(move.to / 10);
                    if ((piece.player === 'white' && targetRow === 9) || (piece.player === 'black' && targetRow === 0)) isUpgraded = true;
                }
                newPieces.push({ ...piece, position: move.to, isUpgraded: isUpgraded });
                setPieces(newPieces);
                const nextTurn = turn === 'white' ? 'black' : 'white';
                checkWin(newPieces, nextTurn);
                setTurn(nextTurn);
                setTurnTime(TURN_TIME_LIMIT); 
                setSelectedPieceId(null);
            };

            const checkWin = (currentPieces, nextPlayer) => {
                const whiteCount = currentPieces.filter(p => p.player === 'white').length;
                const blackCount = currentPieces.filter(p => p.player === 'black').length;
                if (whiteCount === 0) triggerWin('black', "ğŸ† åƒå…‰æ‰€æœ‰å°æ‰‹ï¼");
                if (blackCount === 0) triggerWin('white', "ğŸ† åƒå…‰æ‰€æœ‰å°æ‰‹ï¼");
            };

            const triggerWin = (winnerColor, reason) => {
                setRoundWinner(winnerColor);
                setWinReason(reason);
                setIsPaused(false);
                let winnerId = null;
                if (winnerColor === 'white') winnerId = round === 1 ? 'p1' : 'p2';
                else if (winnerColor === 'black') winnerId = round === 1 ? 'p2' : 'p1';
                if (winnerId) setPlayerWins(prev => ({ ...prev, [winnerId]: prev[winnerId] + 1 }));
                confetti({ particleCount: 200, spread: 100, origin: { y: 0.6 } });
            };

            const handleNextRound = () => { setRound(2); startRound(); };
            const handleFinishMatch = () => { setMatchOver(true); setRoundWinner(null); };
            const resetMatch = () => { setIsNameSet(false); setShowInitialRules(true); setP1Name(""); setP2Name(""); setPlayerWins({ p1: 0, p2: 0 }); setMatchOver(false); setRound(1); };
            const getSquareColor = (idx) => { const row = Math.floor(idx / 10); const col = idx % 10; return (row + col) % 2 === 0 ? 'bg-blue-100/50' : 'bg-blue-200/50'; };

            let matchWinnerName = "";
            let matchResultText = "";
            if (matchOver) {
                if (playerWins.p1 > playerWins.p2) { matchWinnerName = p1Name; matchResultText = "ç²å¾—æœ€çµ‚å‹åˆ©ï¼"; }
                else if (playerWins.p2 > playerWins.p1) { matchWinnerName = p2Name; matchResultText = "ç²å¾—æœ€çµ‚å‹åˆ©ï¼"; }
                else { matchWinnerName = "å¹³æ‰‹"; matchResultText = "é›™æ–¹å¯¦åŠ›ç›¸ç•¶ï¼"; }
            }

            return (
                <div className="flex flex-col h-full w-full">
                    {/* --- Modals --- */}
                    {showInitialRules && <RulesModal isInitial={true} onClose={() => setShowInitialRules(false)} />}
                    {!isNameSet && !showInitialRules && <NameInputModal whiteName={p1Name} setWhiteName={setP1Name} blackName={p2Name} setBlackName={setP2Name} onConfirm={handleNameConfirm} />}
                    {showRules && !showInitialRules && <RulesModal onClose={() => setShowRules(false)} isInitial={false} />}

                    {/* --- Header --- */}
                    {isNameSet && !showInitialRules && (
                        <div className="h-16 shrink-0 bg-white/90 shadow-md flex items-center justify-between px-6 border-b-2 border-[#708899]/30 z-20 mb-8">
                            <h1 className="text-xl font-bold text-[#5a6e7d] flex items-center gap-2"><span>æ•¸æˆ°æ£‹</span><span className="text-xs bg-[#e0e8e5] text-[#556b66] px-2 py-1 rounded">R{round}/2</span></h1>
                            <div className="flex flex-col items-center"><span className="text-xs text-stone-400 font-bold tracking-widest">GLOBAL TIME</span><div className={`text-3xl font-black digital-font tracking-widest ${globalTime < 60 ? 'text-red-500 animate-pulse' : 'text-stone-700'}`}>{formatTime(globalTime)}</div></div>
                            <button onClick={() => setShowRules(true)} className="flex items-center gap-2 text-[#708899] hover:text-[#5a6e7d] font-bold text-sm"><BookIcon className="w-5 h-5"/> è¦å‰‡</button>
                        </div>
                    )}

                    {/* --- Main Content --- */}
                    <div className="flex-1 flex items-center justify-center p-4 gap-8 min-h-0 relative">
                        
                        {/* Left Player */}
                        <div className={`w-48 flex flex-col justify-center gap-4 transition-all duration-300 ${turn === 'white' ? 'opacity-100 scale-105' : 'opacity-60 scale-95'}`}>
                            <div className={`bg-white p-4 rounded-3xl shadow-xl border-4 ${turn === 'white' ? 'border-orange-400' : 'border-stone-200'} relative`}>
                                {turn === 'white' && !isPaused && <div className="absolute -top-4 -right-4 w-12 h-12 bg-red-500 rounded-full flex items-center justify-center text-white font-black text-xl shadow-lg border-2 border-white animate-bounce z-20">{turnTime}</div>}
                                <div className="flex flex-col items-center text-center">
                                    <div className="w-16 h-16 rounded-full bg-white border-4 border-stone-200 flex items-center justify-center mb-2 shadow-inner"><PawIcon className="w-8 h-8 text-stone-300" /></div>
                                    <h2 className="font-bold text-lg text-stone-800 truncate w-full">{getCurrentWhiteName()}</h2>
                                    <div className="text-xs text-stone-400 font-bold mb-2">ç™½è²“ (å…ˆæ‰‹)</div>
                                    <div className="w-full bg-stone-100 rounded-lg p-2 mb-2"><div className="text-xs text-stone-400">ç¸½å‹å ´</div><div className="text-2xl font-black text-stone-700">{playerWins[round === 1 ? 'p1' : 'p2']}</div></div>
                                    <div className="flex items-center gap-1 bg-red-50 px-2 py-1 rounded text-xs text-red-500 font-bold w-full justify-center"><AlertIcon className="w-3 h-3"/> çŠ¯è¦ {fouls.white}/{MAX_FOULS}</div>
                                </div>
                            </div>
                        </div>

                        {/* Center Board Container - Strict Ratio & Grid */}
                        <div className="h-full aspect-square relative flex items-center justify-center py-2">
                            <div className="wood-texture p-3 rounded-xl shadow-2xl w-full h-full relative">
                                <div className="grid grid-cols-10 grid-rows-10 gap-px bg-stone-400/50 border-4 border-stone-700 rounded-lg overflow-hidden w-full h-full">
                                    {Array.from({ length: 100 }).map((_, idx) => {
                                        const num = idx + 1;
                                        const piece = pieces.find(p => p.position === idx);
                                        const isSelected = selectedPieceId && piece && piece.id === selectedPieceId;
                                        const isWhiteHome = idx < 10;
                                        const isBlackHome = idx >= 90;

                                        return (
                                            <div key={idx} onClick={() => handleSquareClick(idx)} className={`relative w-full h-full ${getSquareColor(idx)} ${isSelected ? 'bg-yellow-200/80 ring-inset ring-2 ring-yellow-400' : ''} cursor-pointer`}>
                                                {/* Number */}
                                                <span className="absolute top-[2%] left-[5%] text-[clamp(10px,1.5vw,20px)] font-black font-mono text-blue-900/80 text-shadow-white select-none z-0 leading-none">{num}</span>
                                                {/* Zones */}
                                                {isWhiteHome && <div className="absolute bottom-0 w-full h-[10%] bg-red-400/30"></div>}
                                                {isBlackHome && <div className="absolute top-0 w-full h-[10%] bg-blue-400/30"></div>}
                                                {/* Piece */}
                                                {piece && (
                                                    <div className={`absolute inset-0 flex items-center justify-center z-10 transition-transform duration-200 ${isSelected ? 'scale-110 -translate-y-1' : 'hover:scale-105'}`}>
                                                        <div className="w-[90%] h-[90%] relative">
                                                            <CatPieceSVG colorClass={piece.player === 'white' ? (piece.isUpgraded ? 'fill-red-50' : 'fill-white') : (piece.isUpgraded ? 'fill-red-900' : 'fill-stone-800')} strokeClass={piece.player === 'white'} />
                                                            <span className={`absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-[40%] text-[clamp(12px,2vw,28px)] font-black font-serif ${piece.isUpgraded ? 'text-red-500' : (piece.player === 'white' ? 'text-stone-900' : 'text-stone-100')}`}>{piece.value}</span>
                                                            {piece.isUpgraded && <div className="absolute bottom-1 right-2 text-sm">ğŸ‘‘</div>}
                                                        </div>
                                                    </div>
                                                )}
                                            </div>
                                        );
                                    })}
                                </div>
                            </div>
                        </div>

                        {/* Right Player */}
                        <div className={`w-48 flex flex-col justify-center gap-4 transition-all duration-300 ${turn === 'black' ? 'opacity-100 scale-105' : 'opacity-60 scale-95'}`}>
                            <div className={`bg-stone-800 p-4 rounded-3xl shadow-xl border-4 ${turn === 'black' ? 'border-yellow-400' : 'border-stone-600'} relative`}>
                                {turn === 'black' && !isPaused && <div className="absolute -top-4 -left-4 w-12 h-12 bg-red-500 rounded-full flex items-center justify-center text-white font-black text-xl shadow-lg border-2 border-white animate-bounce z-20">{turnTime}</div>}
                                <div className="flex flex-col items-center text-center">
                                    <div className="w-16 h-16 rounded-full bg-stone-700 border-4 border-stone-600 flex items-center justify-center mb-2 shadow-inner"><PawIcon className="w-8 h-8 text-stone-500" /></div>
                                    <h2 className="font-bold text-lg text-white truncate w-full">{getCurrentBlackName()}</h2>
                                    <div className="text-xs text-stone-400 font-bold mb-2">é»‘è²“ (å¾Œæ‰‹)</div>
                                    <div className="w-full bg-stone-700 rounded-lg p-2 mb-2"><div className="text-xs text-stone-400">ç¸½å‹å ´</div><div className="text-2xl font-black text-white">{playerWins[round === 1 ? 'p2' : 'p1']}</div></div>
                                    <div className="flex items-center gap-1 bg-red-900/30 px-2 py-1 rounded text-xs text-red-400 font-bold w-full justify-center"><AlertIcon className="w-3 h-3"/> çŠ¯è¦ {fouls.black}/{MAX_FOULS}</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    {/* Pause Button */}
                    <button onClick={togglePause} className={`fixed bottom-6 right-6 z-[60] w-16 h-16 rounded-full shadow-2xl flex items-center justify-center transition-all duration-300 transform hover:scale-110 active:scale-95 ${isPaused ? 'bg-green-500 text-white border-4 border-white' : 'bg-yellow-400 text-stone-900 border-4 border-white'}`}>{isPaused ? <PlayIcon className="w-8 h-8 ml-1"/> : <PauseIcon className="w-8 h-8"/>}</button>

                    {/* End Screens */}
                    {roundWinner && !matchOver && <div className="fixed inset-0 bg-black/70 z-[70] flex items-center justify-center p-4"><div className="bg-white rounded-2xl p-10 text-center"><h2 className="text-3xl font-bold mb-2">{roundWinner === 'draw' ? 'æœ¬å±€å¹³æ‰‹!' : `${roundWinner === 'white' ? getCurrentWhiteName() : getCurrentBlackName()} è´äº†!`}</h2><p className="mb-6">{winReason}</p>{round === 1 ? <button onClick={handleNextRound} className="w-full px-8 py-4 bg-[#708899] hover:bg-[#5a6e7d] text-white font-bold rounded-xl shadow-xl">ä¸‹ä¸€å›åˆ</button> : <button onClick={handleFinishMatch} className="w-full px-8 py-4 bg-yellow-400 font-bold rounded-xl shadow-xl">è§€çœ‹çµæœ</button>}</div></div>}
                    {matchOver && <div className="fixed inset-0 bg-black/80 z-[80] flex items-center justify-center p-4"><div className="bg-white rounded-2xl p-12 text-center"><h2 className="text-4xl font-bold mb-2">æ¯”è³½çµæŸ</h2><div className="text-2xl font-bold text-orange-600 mb-8">{matchWinnerName} {matchResultText}</div><button onClick={resetMatch} className="px-10 py-4 bg-stone-800 text-white font-bold rounded-full">å›åˆ°é¦–é </button></div></div>}
                    {errorMsg && <div className="fixed inset-0 z-[60] flex items-center justify-center bg-stone-900/60 backdrop-blur-sm"><div className="bg-white border-4 border-red-400 rounded-3xl p-8 text-center"><h2 className="text-3xl font-bold text-red-600 mb-2">{errorMsg.title}</h2><p>{errorMsg.detail}</p></div></div>}
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>